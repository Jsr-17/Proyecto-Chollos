<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <form id="form">
      <div class="mb-3">
        <label for="exampleInputEmail1" class="form-label">Email address</label>
        <input
          type="email"
          class="form-control"
          id="exampleInputEmail1"
          aria-describedby="emailHelp"
        />
        <div id="emailHelp" class="form-text">
          We'll never share your email with anyone else.
        </div>
      </div>
      <div class="mb-3">
        <label for="exampleInputPassword1" class="form-label">Password</label>
        <input
          type="password"
          class="form-control"
          id="exampleInputPassword1"
        />
      </div>
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="exampleCheck1" />
        <label class="form-check-label" for="exampleCheck1">Check me out</label>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>

    <script>
      const formulario = document.getElementById("form");
      /*
                  //como lo que estoy realizando es una consulta a la base de datos y a un servido necesito usar la asincronia
                  const hacerFetch = async () => {
                    //Para recoger los datos en PHP desde la variable Global $_Post[] necesito crear con los datos del cliente un objeto de URL
                    const datos = new URLSearchParams();
                    //Este método se encarga de crear cada uno de los POST con los datos que definamos en este caso e optado por utilizar datos simples de prueba
                    datos.append("id", 0);
                    datos.append("edad", 25);
                    datos.append("nombre", "Juan");
                    datos.append("correo", "juan@example.com");
                    datos.append("username", "juan123");
                    datos.append("contrasenya", "123456");
                    datos.append("admin", true);

                    try {
                      //El fetch al hacer un post cambia considerablemente conforme lo hace al get

                      const response = await fetch(
                        //ruta donde esta el archivo PHP al cual voy hacer una consulta
                        "http://localhost:8080/usuario/addUsuario.php",
                        {
                          //método post Por que yo espero recibir en el back-end un POST
                          method: "POST",
                          //aqui se configura el tipo de dato que vamos a enviar en este caso en concreto son datos planos pero de normal vendrian de un formulario
                          //por eso uso /x-www-form-urlencoded
                          headers: {
                            "Content-Type": "application/x-www-form-urlencoded",
                          },
                          //esto de aquí hace referencia a los datos que voy a enviar
                          body: datos.toString(),
                        }
                      );

                      const responseText = await response.text();
                      console.log("Respuesta cruda:", responseText);
                    } catch (error) {
                      console.log(error);
                    }
                  };
      */
      /*
      const hacerFetchRM = async () => {

        const datos = new URLSearchParams();

        datos.append("id", 5);
        datos.append("edad", 25);
        datos.append("nombre", "Juan");
        datos.append("correo", "juan@example.com");
        datos.append("username", "juan123");
        datos.append("contrasenya", "123456");
        datos.append("admin", true);

        try {
          const request = await fetch(
            "http://localhost:8080/usuario/rmUsuario.php",
            {
                //Importante POST debe de ir en Mayúscula si sale error cannot fetch on window significa que falta el metodo que vamos a usar pa la peti
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: datos.toString(),
            }
          );
          const data = await request.text();
          console.log(data);
        } catch (error) {
          console.log(error);
        }
      };*/
      /*const hacerFetchAll = async () => {
        const resp = await fetch(
          "http://localhost:8080/usuario/selectAllUsuario.php"
        );
        const data = await resp.json();
        console.log(data);
      };*/
      /*
      const hacerFetch = async () => {
        const datos = new URLSearchParams();
        datos.append("id", 15);

        const resp = await fetch(
          "http://localhost:8080/usuario/selectOneUsuario.php",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: datos.toString(),
          }
        );

        const data = await resp.json();
        console.log(data);
      };*/
      /* const hacerFetch = async () => {
        //error de cors puede dar debido a que hay un espacio en el archivo php
        const datos = new URLSearchParams();
        datos.append("columna", "username");
        datos.append("valor", "carlos");

        const resp = await fetch(
          "http://localhost:8080/usuario/selectUsuarioby.php",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: datos.toString(),
          }
        );

        const data = await resp.json();
        console.log(data);
      };*/
      /*
      const hacerFetch = async () => {
        const datos = new URLSearchParams();

        datos.append("id", 5);
        datos.append("edad", 35);
        datos.append("nombre", "Veronica");
        datos.append("correo", "Veronica@example.com");
        datos.append("username", "VeronicaGuapa");
        datos.append("contrasenya", "123456");
        datos.append("admin", false);

        try {
          const request = await fetch(
            "http://localhost:8080/usuario/updateAllOfUser.php",
            {
              //Importante POST debe de ir en Mayúscula si sale error cannot fetch on window significa que falta el metodo que vamos a usar pa la peti
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: datos.toString(),
            }
          );
          const data = await request.text();
          console.log(data);
        } catch (error) {
          console.log(error);
        }
      };*/

      /*const hacerFetch = async () => {
        const datos = new URLSearchParams();

        datos.append("id", 5);
        datos.append("edad", 35);
        datos.append("nombre", "Veronica");
        datos.append("correo", "Veronica@example.com");
        datos.append("username", "VeronicaGuapa");
        datos.append("contrasenya", "123456");
        datos.append("admin", false);

        datos.append("columna", "edad");
        datos.append("valor", "20");

        try {
          const request = await fetch(
            "http://localhost:8080/usuario/updateOneUsuario.php",
            {
              //Importante POST debe de ir en Mayúscula si sale error cannot fetch on window significa que falta el metodo que vamos a usar pa la peti
              method: "POST",
              headers: {
                "Content-Type": "application/x-www-form-urlencoded",
              },
              body: datos.toString(),
            }
          );
          const data = await request.text();
          console.log(data);
        } catch (error) {
          console.log(error);
        }
      };
      */
      formulario.addEventListener("submit", (e) => {
        e.preventDefault();
        hacerFetch();
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
